window.main=window.main||{};var siteName="Antwerp Poster Festival",pageTitle,$htmlbody=$("html, body"),$body=$("body"),ww=$(window).width(),wh=$(window).height(),dw=$(document).width(),dh=$(document).height(),heroHeight=$(".js-hero").height(),heroDivision=heroHeight/4,$header=$(".js-header"),$main=$(".js-main"),$nav=$(".js-nav"),$hero=$(".js-hero"),$mouse=$("#mouse"),$btnToggleNav=$(".js-toggle-nav"),$anchorLink=$(".js-anchor-link"),anchorLink=".js-anchor-link",$anchorItem=$(".js-anchor-item"),anchorItem="js-anchor-item",clickedAnchor,currentPos,currentItem,lastScrollPos=0,delta=15,mouseWidth=0,isHomepage=!1,isTouchdevice=!1,triggered=!1,isPageOpen=!1,isNavOpen=!1;main.init=function(){main.checkOnScroll($(document).scrollTop()),main.checkSection(),main.initEvents(),main.initInteraction(),main.redraw(),setTimeout(function(){$(".js-hero-title").removeClass("is-visibility-hidden")},220),setTimeout(function(){$(".js-hero-corners").removeClass("is-visibility-hidden")},660),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(isTouchdevice=!0,$body.addClass("is-touch"),$body.addClass("is-mobile-device")),$(window).on("load",function(){main.redraw()}),$(window).on("resize",function(){main.redraw()})},main.initInteraction=function(){main.redraw();var e=ww/4,t=function(t){var i=$(t.target);0==triggered&&setTimeout(function(){$mouse.removeClass("is-hidden"),triggered=!0},50);var n=t.clientX;n-=mouseWidth;var o=t.clientY;o-=mouseWidth,$mouse.css({top:o+"px",left:n+"px"});var a=i.is("a, a *, .has-cursor-link-state, .has-cursor-link-state *, input, textarea, button"),s=$mouse.hasClass("has-hovered-state");a&&!s?$mouse.addClass("has-hovered-state"):!a&&s&&$mouse.removeClass("has-hovered-state"),t.clientY<=heroDivision?$(".state-switcher").attr("data-state","1"):t.clientY>heroDivision&&t.clientY<=2*heroDivision?$(".state-switcher").attr("data-state","2"):t.clientY>2*heroDivision&&t.clientY<=3*heroDivision?$(".state-switcher").attr("data-state","3"):t.clientY>3*heroDivision&&t.clientY<=4*heroDivision&&$(".state-switcher").attr("data-state","4"),t.clientX<=e?$(".state-switcher").attr("data-outline","0"):t.clientX>e&&t.clientX<=2*e?$(".state-switcher").attr("data-outline","1"):t.clientX>2*e&&t.clientX<=3*e?$(".state-switcher").attr("data-outline","0"):t.clientX>3*e&&t.clientX<=4*e&&$(".state-switcher").attr("data-outline","1")},i=function(e){$mouse.hide()},n=function(e){$mouse.show()};0==isTouchdevice&&(document.addEventListener("mousemove",t),document.addEventListener("mouseleave",i),document.addEventListener("mouseenter",n))},main.checkSection=function(){var e;window.location.hash&&(e=window.location.hash.substring(1),$("#"+e).length&&main.scrollTo("#"+e))},main.initEvents=function(){$body.on("click",anchorLink,function(e){e.preventDefault(),clickedAnchor=$(this).attr("href"),main.scrollTo($(clickedAnchor)),isNavOpen&&main.toggleNav()}),$btnToggleNav.on("click",function(e){e.preventDefault(),main.toggleNav()}),$(".o-form__checkbox").on("click",function(){$(this).attr("aria-checked","false"==$(this).attr("aria-checked")?"true":"false")})},main.toggleNav=function(e){isNavOpen=!isNavOpen,1==isNavOpen?($body.addClass("no-scroll"),$header.addClass("is-active")):($body.removeClass("no-scroll"),$header.removeClass("is-active"))},main.redraw=function(){ww=$(window).width(),wh=$(window).height(),dw=$(document).width(),dh=$(document).height(),mouseWidth=$mouse.outerWidth()/2,heroHeight=$(".js-hero").height(),heroDivision=heroHeight/4},main.updateState=function(e,t){var i=window.location.origin,n=e.replace(i,"");"page"===t?(pageTitle=$("#page-content section").attr("data-title"),history.pushState({},"page",n),document.title=pageTitle+" – "+siteName):"section"===t&&(pageTitle=$(e).attr("data-title"),history.pushState({},"page",n),document.title=pageTitle+" – "+siteName)},main.setSection=function(e){var t=ww/100*3;$anchorItem.each(function(){var i=$(this).offset().top-t,n=i+$(this).innerHeight();e>=i&&e<=n&&($anchorItem.removeClass("is-current"),$anchorLink.removeClass("is-current"),$(this).addClass("is-current"),currentItem=$(this).attr("id"),$(anchorLink+'[href="#'+currentItem+'"]').addClass("is-current"),main.updateState("#"+currentItem,"section"))})},main.checkOnScroll=function(e){e<=delta&&(currentItem=$anchorItem.first().attr("id")),Math.abs(lastScrollPos-e)<=delta||(main.setSection(e),lastScrollPos=e)},main.scrollTo=function(e){$("html:not(:animated), body:not(:animated)").animate({scrollTop:$(e).position().top},660),$htmlbody.on("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove",function(){$htmlbody.stop()})};var onScroll=function(){main.checkOnScroll($(document).scrollTop())};window.addEventListener("scroll",_.throttle(onScroll,600,{leading:!0,trailing:!0})),$(main.init);
//# sourceMappingURL=main.min.js.map
